# Переводчик статей WordPress

## Описание
Скрипт предназначен для перевода статей из WordPress на несколько языков с последующей проверкой качества переводов используя метрику схожести текстов BLEU и при помощи GPT.
Перевод происходит в два этапа: сперва нейросеть генерирует первую версию перевода. Затем нейросеть оценивает качество перевода и улучшает его.

## Входные и выходные данные
- **Вход**: XML файл с экспортированной из WordPress статьей на английском языке.
- **Выход**: XML файл с набором переведенных статей, предназначенный для импорта в WordPress. HTML документы, в которых оценивается качество перевода каждого предложения.

## Требования
- Python 3.11
- Установка зависимостей из `requirements.txt`.
- Указание OpenAI API ключа в файле `.env` (файл надо создать в корневой папке скрипта, в нем добавить строку `GPT_API_KEY=ключ`)

## Запуск
`python translator.py example.xml`
Вместо `example.xml` подставьте путь к исходному xml файлу. На выходе будет файл с названием вида `output_example.xml` в корневой директории скрипта. А также на выходе будут html файлы с названиями вида `report_ru.html` в корневой папке.

## Что делает скрипт
1. **Парсинг XML файла**:
    - Извлекает:
        - `title`
        - `content`
        - `excerpt` (короткое описание)
        - `link`
2. **Для каждого целевого языка**:
    1. Переводит `title`, `content`, `excerpt`, `link` на целевой язык.
    2. Осуществляет проверку качества перевода двумя способами:
        - **Обратный перевод**: Переводит текст обратно на исходный язык.
        - **[Опционально] Метрика BLEU**: (https://en.wikipedia.org/wiki/BLEU) Сравнивает исходный текст и дважды переведенный. Значение метрики:
            - 0 - тексты абсолютно не похожи
            - 1 - тексты идентичны
        - **Оценка качества перевода с помощью GPT**: 
            - Подает модели два текста (оригинал и переведенный) и просит оценить от 1 до 5:
                - 1 - Extremely poor translation
                - 2 - Poor translation
                - 3 - Mediocre translation
                - 4 - Good translation
                - 5 - Excellent translation
            - Проверяет, оценивает комментирует перевод каждого предложения.
            - На основе оценок, переводов, комментарием генерирует улучшенную версию перевода.
        - Формирует отчет в виде html файла
3. [Эта часть пока не реализована] Скрипт будет:
    - Сохранять переведенную ссылку.
    - Проверять контент на наличие ссылок.
    - Проверять, есть ли в базе подходящая переведенная ссылка на нужном языке и подставлять ее.
4. **Формирование XML файла**:
    - Создает XML файл с переведенными статьями, предназначенный для импорта в WordPress.
